---
title: 'Agent —— 从Skills、MCP 到子代理的协作范式'
published: 2026-02-12
updated: 2026-02-12
description: '在本文章中，你将学习 `Skills` 是如何工作的，学习创建 `Skills` 的最佳实践，并为不同的用例构建 `Skills`，包括编码、研究和数据分析等。' 
image: '' 
tags: [Agent] 
category: Intelligence
draft: false 
lang: en
---
:::TIP[Materials]
你可以点击以下链接来获取 `Agent Skills` 的资料：
::github(repo="https-deeplearning-ai/sc-agent-skills-files")
:::

## 前言

在[上一篇](https://www.loners.site/posts/agent-part1/)中，我们理解了 `Agent Skills` 的三层构造和“渐进式披露”的核心逻辑。但对于像帆帆这样的开发者来说，仅仅会“用”现成的 `Skill` 是不够的。为了让 `Agent` 完美契合复杂的课设需求，我们需要学会如何**深度定制**。

# 智能体生态系统概述

在一个成熟的智能体架构中，`Skills` 并不是孤军奋战的。它需要与 `MCP`、`Tools` 和 `Subagents` 协同工作，形成一套完整的“数字员工”体系。

![4.2.png](./4.2.png)

## 1.1 核心组件的协同逻辑

- **MCP 服务器(Model Context Protocol)**：连接智能体与外部系统（如数据库、Google Drive）的管道，提供所需的上下文数据。<u>**它解决了“数据在哪里”的问题。**</u>
- **Tools（工具）**：提供底层的**<u>原子化</u>**操作能力，如编辑文件或执行命令。工具定义始终存在于上下文窗口中。
- **Subagents（子代理）**：用于多线程和并行处理的特化 AI。它们在独立的上下文中运行,**<u>用于实现多线程和并行处理，避免干扰主智能体的思考。</u>**
- **Skills（技能）**：用于可重复的主线程工作流。**<u>它教导智能体“如何处理”通过 `MCP` 获取的数据。</u>**

## 1.2 为什么 Skills 能省 Token？

与**<u>“始终在线”</u>**的工具（Tools）不同，**Skills 是<u>*渐进式加载*</u>的**。

- **按需加载**：只有当对话触发了特定的语义需求时，详细指令才会被装载。
- **防止记忆缺失**：这种机制节省了宝贵的上下文空间（`Token`），防止 AI 因为预设指令过多而占领“短期记忆”，导致聊到核心逻辑时丢三落四。

# 命名的艺术：让 AI 一秒“认出”技能

创建一个 `Skill` 的第一步不是写代码，而是**命名**。`Skill` 的名称和描述是 AI 决定是否加载它的唯一依据。值得一提的是，正是基于**严密的逻辑指令与确切的执行步骤**，Agent 才能在复杂的数字世界中精准导航。

:::NOTE[导航]

对 `Agent` 来说，他就像一个司机，`Skill` 是一个高德地图，假设说高德地图跟你说距离目的地 $10$ km,我是一个正常人听了都会绝望，我们无从下手，哪个方向？怎么去？这些我们都不能知道，而导航(`Skill`)只要足够清晰，那么我们就可以得知在什么情况下，转向、加速。

:::

而一个高质量的 `Skill` 采用一种**渐进式披露**的手段，确保 `Agent` 在没一个路口都能得到最精准的指令。

## 2.1 命名规范与触发逻辑

### 2.1.1 命名规范 (Naming)

- **格式要求**：采用「动词 + ing」的格式，例如 `generating-practice-questions` 或 `analyzing-time-series`。
- **字符限制**：名称最多 64 个字符，且只能包含小写字母、数字和连字符。
- **语义化**：这种动名词形式能清晰表达动作属性，便于 AI 分类和检索。

### 2.1.2 描述的“灵魂” (Description)

描述不仅要说“做什么”，更要明确“**何时使用**”。

- **关键词策略**：在描述中包含特定的关键词。例如，一个营销分析技能的描述应包含“转化漏斗”、“点击效率”等词汇，以显著提高 AI 的命中率。
- **字数空间**：你有 1024 个字符的空间来详细定义输入要求和输出格式。

## 2.2 Agent 智能体生态组件对比表

| **组件维度**   | **MCP (模型上下文协议)**                  | **Tools (底层工具)**                   | **Skills (专业技能)**                   | **Subagents (子代理)**                  |
| -------------- | ----------------------------------------- | -------------------------------------- | --------------------------------------- | --------------------------------------- |
| **核心定义**   | 连接外部系统与数据的“管道”                | 执行原子化操作的“硬件”                 | 封装专业知识的“工作流”                  | 执行单一任务的“特化代理”                |
| **形象比喻**   | **实时路况/传感器**：告诉你外面发生了什么 | **油门/刹车/扳手**：提供基础的操作能力 | **高德导航/驾驶指南**：教你如何处理路况 | **副驾驶/泊车助手**：分担特定的复杂操作 |
| **上下文管理** | 按需引入外部数据上下文                    | **始终存在**于上下文窗口中             | **渐进式加载**，语义匹配时才载入        | **隔离上下文**，在独立线程运行          |
| **主要价值**   | 解决“数据在哪里”的问题                    | 提供读写文件、运行代码的能力           | 确保输出可预测、可重复且专业            | 提升并行处理效率，节省主 Token          |
| **典型示例**   | Google Drive MCP, GitHub MCP              | `bash`, `filesystem`, `editor`         | 练习题生成、时间序列分析                | 代码审查子代理、翻译子代理              |

# 技能文件夹的“特种作战”配置

一个功能完备的 `Skill` 绝不仅仅是一个 `SKILL.md`。为了实现复杂逻辑的解耦，我们需要利用好可选目录：

| **目录**          | **核心作用**                                               | **备注**                                        |
| ----------------- | ---------------------------------------------------------- | ----------------------------------------------- |
| **`/scripts`**    | 存放任何编程语言编写的代码逻辑（如数据处理脚本）。         | 需明确告知 AI 是“执行”还是“阅读”该脚本。        |
| **`/references`** | 存放超过 100 行的重型文档或 API 规范。                     | 建议在文件顶部包含目录（TOC）以便 AI 快速定位。 |
| **`/assets`**     | 存放输出模板（如 LaTeX/Markdown 模板）、图像或数据查找表。 | 实现“知识即配置”，修改模板无需改动核心逻辑。    |

------

# 实战：构建一个“时间序列分析”技能

假设帆帆需要分析课设中的实验数据（如内存占用率、QPS 波动等）往往需要专业的统计学知识。通过构 `analyzing-time-series` 技能，我们可以将这些专业逻辑封装，让 **Agent** 像专家一样按部就班地进行分析。

## 4.1 运行诊断 (Run diagnostics）

第一步的核心是利用自动化脚本对原始数据进行质量评估。

1. **执行逻辑**：Agent 会调用 `python scripts/diagnose.py data.csv`。
2. **自动化能力**：脚本会自动检测日期列（`date-col`）和数值列（`value-col`），并运行平稳性检测（如 ADF 检验）等统计测试。
3. **产物输出**：生成 `diagnostics.json`（供 `Agent` 或后续脚本读取的结构化指标）和 `summary.txt`（供人类阅读的初步结论）。

## 4.2 生成可视化 (Generate plots)

单纯的代码输出可能不够直观，可视化是检查 `Agent` 逻辑是否跑偏的关键路标。

1. **执行逻辑**：运行 `python scripts/visualize.py data.csv`，将结果存储于 `results/plots/` 目录下。
2. **同步校验**：该步骤会生成 $ACF$（自相关函数）和 $PACF$（偏自相关函数）图表。
3. **关键点**：这些图表必须与第一步的平稳性测试结果保持同步，以确保 `Agent` 在“导航”过程中没有出现数据误读。

## 4.3 结果解读 (Report) 

这是最体现 `Skill` 专业度的一步。`Agent` 不再是复读数据，而是参考 `references/interpretation.md` 中的业务标准进行深度解读。

**深度追问**：Agent 需要回答以下五个核心逻辑问题：

1. **可预测性**：数据是否具备预测价值，还是纯粹的随机噪声？
2. **平稳性**：是否需要进行差分（Differencing）处理？
3. **季节性**：是否存在周期性波动？周期是多少？
4. **趋势性**：数据的整体走向是上升还是下降？
5. **转换需求**：是否需要进行对数转换或其他预处理来稳定方差？

:::Note[渐进式披露]

**逻辑解耦**：诊断、绘图、解读相互独立，任何一步报错，`Agent` 都能精准定位是“路况不对”的**数据问题**还是“车坏了”的**脚本问题**。

**减少幻觉**：<u>**幻觉是 AI 凭空编造了一个不存在的函数名、一段历史事实。**</u>它是由于 `LLM` 试图补全概率分布而产生的“文学创作”，通过 `/references` 提供私域领域知识，**强制 AI 优先遵循本地规则，而非模型自带的大规模训练数据。**

:::

# 编排器模式：Subagents 的降维打击

当一个任务（如“全自动客户洞察分析”）涉及多个数据源时，单个 `Skill` 可能会力不从心。这时我们需要引入 **Subagents（子代理）**。

- **隔离上下文**：每个子代理拥有独立的上下文环境，防止信息污染。
- **并行处理**：主智能体作为“编排器（Orchestrator）”，可以同时派出“访谈分析员”和“问卷分析员”两个子代理并行工作。
- **能力复用**：每个子代理可以被赋予特定的 `Skill`（如 Excel 处理技能），从而精准完成细分任务。

------

# 工具链：从本地到云端

要高效地开发和测试这些技能，帆帆可以使用以下两个利器：

### 6.1 Claude Desktop：Skill Creator

这是一个本地迭代入口。通过开启 `Capabilities > Skill Creator`，你可以将本地修改后的 `Skill` 立即推送到 `Claude Desktop` 中进行试跑。

- **最小闭环测试**：挑选官方 Skill -> 复制到本地 ->改一处 Prompt -> 触发 Update -> 输入样例 -> 观察行为。

### 6.2 Claude Code：技能广场 (Marketplace)

在 `Claude Code` 中，你可以通过 `/plugin` 进入 `Marketplace`，直接下载 Anthropic 官方提供的 `Office` 文档处理（docx/xlsx/pdf）等预设技能。

- **安装命令**：输入 `/plugin` 选择 `Add Marketplace`，输入 `anthropics/skills` 即可获取官方技能库。

------

## 结语

从“复读机”到“指挥官”，`Agent Skills` 的核心在于**标准化**与**解耦**。

高质量的 `Skill` 应该像积木一样：命名的标准化保证了**可检索性**，结构的解耦保证了**可扩展性**，而子代理的引入则保证了**复杂任务的上限**。

而且话又说回来了，会说人话的 `Skills` 才是 `Agent` 的核心灵魂，否则只会让它在逻辑的泥潭中南辕北辙。
